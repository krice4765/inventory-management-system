# 本番環境デプロイ前チェックリスト

## 🚨 必須対応項目（CRITICAL）

### 1. Supabase URL Configuration修正
**現在の問題**: Password reset redirect URLが localhost のまま

#### 修正が必要な設定
```
現在: http://localhost:5173/reset-password
修正: https://inventory-management-system-c49.pages.dev/reset-password
```

**修正場所**: Supabase Dashboard → Authentication → URL Configuration

### 2. 環境変数の確認
**現在の設定**:
- VITE_SUPABASE_URL: ✅ 正常
- VITE_SUPABASE_ANON_KEY: ✅ 正常

### 3. SMTP設定の本番対応
**現在の状況**: Gmail SMTP（開発環境用）
**推奨**: SendGrid等の本番用SMTPサービスへの移行検討

## 🔧 実行手順

### Step 1: Supabase URL設定更新
1. https://supabase.com/dashboard にアクセス
2. Authentication → URL Configuration
3. 以下を更新:
   ```
   Site URL: https://inventory-management-system-c49.pages.dev
   Password reset redirect URL: https://inventory-management-system-c49.pages.dev/reset-password
   ```

### Step 2: ローカル変更のコミット
```bash
git add -A
git commit -m "feat: パスワードリセット機能復旧とシステム通知改善

🎉 Generated with [Claude Code](https://claude.ai/code)

Co-Authored-By: Claude <noreply@anthropic.com>"
git push origin main
```

### Step 3: Cloudflare Pages自動デプロイ待機
- GitHubプッシュ後、自動的にデプロイ開始
- 通常2-5分でデプロイ完了

### Step 4: 本番環境テスト
1. https://inventory-management-system-c49.pages.dev/ アクセス
2. ログイン機能確認
3. パスワードリセット機能テスト
4. システム通知機能確認

## ⚠️ 潜在的なリスク

### 高リスク
- **パスワードリセットメールのリダイレクト先**: localhost → 本番URL要修正
- **デバッグコンソールログ**: 本番環境で表示される可能性

### 中リスク
- **SMTP設定**: Gmail制限により配信制限の可能性
- **新機能**: UserManagement, UserApplicationページの初回デプロイ

### 低リスク
- **データベース**: 既存のSupabase設定は変更なし
- **認証システム**: 既存ユーザーへの影響なし

## 📋 デプロイ後確認項目

### 必須確認
- [ ] サイトが正常に表示される
- [ ] ログイン機能が動作する
- [ ] パスワードリセットが正常動作する
- [ ] システム通知が正確に表示される

### 推奨確認
- [ ] 全ページの動作確認
- [ ] モバイル表示の確認
- [ ] パフォーマンスの確認

## 🔄 ロールバック手順

問題発生時:
1. GitHubで前回の安定版にリバート
2. Supabase URL設定を元に戻す
3. Cloudflare Pagesで再デプロイ

---
**作成日**: 2025-09-16
**重要度**: CRITICAL
**所要時間**: 15-30分