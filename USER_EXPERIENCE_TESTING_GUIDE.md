# 🎯 WebUI業務完結性テストガイド

## 📋 テスト実行手順

### Phase 1: データクリア（完了）
✅ SQLスクリプトでテストデータクリア完了
✅ 環境変数診断・修復完了  
✅ 本番ビルド完了

### Phase 2: Netlify デプロイ
```bash
# Netlify CLIでデプロイ
netlify deploy --prod --dir=dist

# または Netlify ダッシュボードで手動デプロイ
# dist フォルダをアップロード
```

### Phase 3: システム診断
デプロイ完了後、Netlify URLでハードリフレッシュ（Ctrl+Shift+R）してから、開発者コンソールで以下を実行：

```javascript
// scripts/system_diagnosis_script.js の内容をコピペ実行
```

## 🧪 業務完結性テストシナリオ

### 1. 基本マスタ登録（5分）
- **取引先登録**: http://localhost:5173/partners
  - 会社名、担当者、連絡先を入力
  - リアルタイム反映確認

- **商品登録**: http://localhost:5173/products  
  - 商品名、商品コード、価格、初期在庫を入力
  - 30秒後の自動更新確認

### 2. 発注業務フロー（10分）
- **新規発注**: http://localhost:5173/orders
  - 取引先選択 → 商品選択 → 数量入力
  - 発注時刻の詳細表示確認

- **分納管理**: http://localhost:5173/purchase-orders
  - 発注リンクから詳細表示
  - 分納確定と在庫連動確認

### 3. 在庫管理連動（5分）
- **在庫確認**: http://localhost:5173/inventory
  - 入出庫履歴の時刻表示確認
  - 自動記録された在庫移動確認

- **Products在庫同期**: http://localhost:5173/products
  - 確定した発注が在庫数に反映されているか
  - リアルタイム更新（30秒＋フォーカス時）

### 4. 詳細ページ機能（3分）
- **発注詳細**: /orders/[id] と /purchase-orders/[id]
  - リンクからの詳細表示
  - 進捗状況、明細表示
  - 確定ボタン動作

## 🎉 成功判定基準

✅ **機能完結性**:
- [ ] 取引先→商品→発注→確定→在庫反映の一連のフローが完了
- [ ] リアルタイム更新が各ページで動作

✅ **データ整合性**:
- [ ] 確定した発注が inventory_movements に自動記録
- [ ] Products の current_stock が正確に更新
- [ ] 時刻情報が全ページで正確に表示

✅ **ユーザビリティ**:
- [ ] SPA ルーティングが404なしで動作
- [ ] 詳細ページへのナビゲーションがスムーズ
- [ ] 検索・フィルタ機能が正常動作

## 🔧 実行用ファイル

1. **データクリア**: `scripts/clear_all_data_for_testing.sql`
2. **環境修復**: `scripts/diagnose_and_fix_env_fixed.ps1` ✅完了
3. **システム診断**: `scripts/system_diagnosis_script.js`

## 📊 テスト記録

| 機能 | 状態 | 確認日時 | 備考 |
|------|------|----------|------|
| マスタ登録 | ⏳ | | |
| 発注フロー | ⏳ | | |
| 在庫連動 | ⏳ | | |
| 詳細表示 | ⏳ | | |

---

**次のステップ**: Netlifyデプロイ完了後、システム診断スクリプトを実行してテスト開始